--- title:World Generation --- ** Phases of world generation We start by making a graph that represents the connectivity between different areas. E.g. we could specify that the second and third area connect to the first,however the third area is locked,so you need to complete the second area,to unlock the third. #+begin_src dot :tangle no digraph example1{area1 ->area2;area1 ->area3}#+end_src Using this layout method,we can write a generator for history elements,that output this area graph. Allowing us to generate all different map variations of a given history. Now we have a graph with some restrictions,that we want to turn into a world. The way we do this,is by taking the *dual* of the graph,which gives us another graph that we then *plot as a straight-line planar graph*,by adding an outer face (triangle),then triangualting the rest of the graph to make it [[https://en.wikipedia.org/wiki/K-vertex-connected_graph][3-connected]] and then using [[https://en.wikipedia.org/wiki/Tutte_embedding][Tutte embedding]]. Once we have the embedding,we again take the dual,giving us the faces for each area. ** Tutte Embedding The Tutte embedding (drawing) of a 3-connected planar graph,is done by choosing an outer face,which is kept static,and then position the rest of the vertices by placing them at the *barycentric coordinates* of their neighbors. This can be done by simulating edges as springs. # \frac{}{}is hack to get it centeret $$F_{rep}= 0 \frac{}{}$$ $$F_{attr}= \sum_{(u,v)\in E}^{}\frac{p_v - p_u}{deg_u}$$ $$ F = F_{rep}+F_{attr}\frac{}{}$$ ** Triangulation [[https://en.wikipedia.org/wiki/Triangulation_(geometry)][Triangulation]] is the process of making a graph 3-connected,this is done by spliting all faces into triangles. ** Dual Taking the dual makes vertices into faces,and faces into vertices. This allows us to transform the connectivity graph into areas. ** Further reading An alternative to tutte embedding is using SPQR trees,which can be constructed in O(n) time (hard to implement). They represent all embeddings,so generating / changing the world dynamically will be alot easier. ** Testing using random graphs Now we have a good generic algorithm for generating a map,however we have only shown examples of small graphs. To test the algorithm we will therefore generate a large planar graph,and try to generate the map based on that. To generate a large random planar map,we will use [[https://en.wikipedia.org/wiki/Delaunay_triangulation][Delaunay triangulation]] (a common technique to just generate a random map),we compute it using *Bowyerâ€“Watson algorithm*.